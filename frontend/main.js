import Like from "./modules/like";
import Bookmark from "./modules/bookmark";
import Search from "./modules/search";
import RegistrationForm from './modules/registrationForm';

if (document.getElementById('likeButton')) new Like();
if (document.getElementById('bookmarkButton')) new Bookmark();
if (document.querySelector('.header-search-icon')) new Search();
if (document.getElementById('registration-form')) new RegistrationForm();

const loginDropdown = document.getElementById('loginDropdown');
const setLoginDropdownWidth = () => {
  const headerBarContainer = document.querySelector('.header-bar .container');
  loginDropdown.style.width = `calc(${headerBarContainer.clientWidth}px - 2rem)`;
}

if (loginDropdown) {
  setLoginDropdownWidth();
  window.addEventListener('resize', setLoginDropdownWidth);

  // Prevent login dropdown from closing when it gets clicked
  loginDropdown.addEventListener('click', e => e.stopPropagation());
}

// Images Loading Error
document.querySelectorAll('img').forEach(image => {
  image.addEventListener('error', e => {
    const image = e.target;
    const src = image.getAttribute('src');
    // image.setAttribute('src', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');
    image.setAttribute('src', 'data:image/gif;charset=binary;base64,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');
    image.setAttribute('data-src', src);
  });
});

// Add slideDown animation to Bootstrap dropdown when expanding.
$('.dropdown').on('show.bs.dropdown', function () {
  $(this).find('.dropdown-menu').first().stop(true, true).slideDown();
});

// Add slideUp animation to Bootstrap dropdown when collapsing.
$('.dropdown').on('hide.bs.dropdown', function () {
  $(this).find('.dropdown-menu').first().stop(true, true).slideUp();
});
